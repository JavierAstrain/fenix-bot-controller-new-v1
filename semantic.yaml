metrics:
  entregados_sin_factura:
    table: MB
    select: ["id","NOMBRE_CLIENTE","FECHA_ENTREGA","dias_desde_entrega"]
    filter: "MB.entregado_bool = TRUE AND MB.no_facturado_bool = TRUE"
    order_by: "FECHA_ENTREGA DESC"
    limit: 200
    synonyms: ["entregados sin factura","pendientes de facturar","entregas no facturadas","entrega sin facturar"]

  entregados_facturados:
    table: MB
    select: ["id","NOMBRE_CLIENTE","NUMERO_FACTURA","FECHA_FACTURACION","FECHA_ENTREGA","MONTO_NETO","dias_desde_entrega"]
    filter: "MB.entregado_bool = TRUE AND MB.facturado_bool = TRUE"
    order_by: "FECHA_ENTREGA DESC"
    limit: 200
    synonyms: ["entregados facturados","entregados con factura","entregas facturadas","con facturación"]

  en_taller:
    table: MB
    select: ["id","NOMBRE_CLIENTE","FECHA_RECEPCION","NUMERO_DIAS_EN_PLANTA"]
    filter: "MB.entregado_bool = FALSE"
    order_by: "NUMERO_DIAS_EN_PLANTA DESC"
    limit: 200
    synonyms: ["en taller","no entregados","en reparación","pendientes taller","tiempo en taller"]

  facturacion_mensual_tipo_cliente:
    table: MB
    select: ["TIPO_CLIENTE","SUM(MB.MONTO_NETO) AS MONTO_NETO"]
    filter: "EXTRACT(month FROM MB.fecha_op) = {MES} AND EXTRACT(year FROM MB.fecha_op) = {ANIO}"
    group_by: ["TIPO_CLIENTE"]
    order_by: "MONTO_NETO DESC"
    limit: 200
    synonyms: ["facturación por mes por tipo","venta mensual por tipo de cliente","facturación mensual tipo cliente"]

  entregas_proximas_sin_factura:
    table: MB
    select: ["id","NOMBRE_CLIENTE","FECHA_ENTREGA","dias_desde_entrega"]
    filter: "MB.entregado_bool = TRUE AND MB.no_facturado_bool = TRUE AND MB.FECHA_ENTREGA BETWEEN CURRENT_DATE AND CURRENT_DATE + INTERVAL {H} DAY"
    order_by: "FECHA_ENTREGA ASC"
    limit: 200
    synonyms: ["entregas próximas sin facturar","por entregar sin factura","se entregan próximos días sin facturar"]

  sin_aprobacion:
    table: MB
    select: ["id","NOMBRE_CLIENTE","FECHA_RECEPCION","NUMERO_DIAS_EN_PLANTA"]
    # proxy de "sin aprobación": no entregados y no facturados
    filter: "MB.entregado_bool = FALSE AND MB.no_facturado_bool = TRUE"
    order_by: "NUMERO_DIAS_EN_PLANTA DESC"
    limit: 200
    synonyms: ["sin aprobación","pendiente de aprobación","esperando aprobación"]

synonyms:
  patente: [placa, matrícula]
  entregados: [entrega, entregado]
  sin_factura: [no facturado, pendiente de facturar, sin facturar]
  asesor: [ejecutivo, vendedor]
  sucursal: [sede]
  cliente: [razon social, razón social]
  facturacion: [ventas, facturas]
